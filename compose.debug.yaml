services:
  web:
    build:
      context: .
    env_file:
      - .env
    ports:
      - 5000:5000
      - 5678:5678
    environment:
      QDRANT_URL: ${QDRANT_URL}
      QDRANT_KEY: ${QDRANT_KEY}
    develop:
      watch:
        - action: rebuild
          path: web
    command:
      [
        "python",
        "-m",
        "debugpy",
        "--wait-for-client",
        "--listen",
        "0.0.0.0:5678",
        "-m",
        "uvicorn",
        "web.main:app",
        "--host",
        "0.0.0.0",
        "--port",
        "5000",
        --reload,
      ]
